<template>
	<section 
		id="splash"
		ref="root"
		class="tc-home-splash"
	>
		<div 
			ref="content"
			class="tc-home-splash-content"
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				class="tc-home-splash-svg"
				role="presentation"
				viewBox="0 0 743 200"
			>
				<defs>
					<clipPath id="tiffany">
						<path d="M742.5 153.3c-.5-.9-1.4-1.3-2.7-1.3s-2.3.4-3.2 1.3a201.6 201.6 0 0 1-45.6 39l-15.2 9.3 7-17.3 7.4-18 8.2-20.5 9.7-24.5a5 5 0 0 0 .7-2.6c0-2.7-1.3-4.1-3.9-4.1-1.9 0-3.2.7-3.8 2.2a353.8 353.8 0 0 1-37.4 51.8 203.3 203.3 0 0 1-20.8 21c-6.7 5.7-12.1 8.5-16.4 8.5a3 3 0 0 1-2.8-1.6c-.7-1-1-2.4-1-3.9 0-3.6 1-8.5 3.2-14.7a520 520 0 0 1 6.4-17.6c2.6-7 5-13.8 7-20.3a56 56 0 0 0 3.2-17.1c0-3.6-.8-7-2.5-10s-5-4.4-9.6-4.4a15 15 0 0 0-8 2.5c-2.8 1.8-6 4.4-9.8 8-3.7 3.7-8 8.3-12.8 14a4442.1 4442.1 0 0 0-18.1 21.8 669 669 0 0 1-13.2 14.5 312 312 0 0 1-14.6 14.5c-4.7 4.4-9 8-13.1 10.8-4 2.7-7.5 4.1-10.3 4.1-2.5 0-3.8-1.4-3.8-4.1 0-2 .4-4.2 1.1-7 .8-2.6 1.8-5.5 3-8.6a240 240 0 0 1 8.7-18.7l4-8.3a129 129 0 0 0 8.2-22.4c1-3.8 1.6-7.2 1.6-10.2a10 10 0 0 0-3.9-8.5 15 15 0 0 0-9.6-3c-9.8 0-19.4 3.8-28.8 11.6a168.8 168.8 0 0 0-27.2 29.3c1.7-4.3 3.4-9.2 5.1-14.9 1.8-5.6 2.6-10 2.6-13 0-3.1-1-6.2-3-9.2-2-3-5-4.5-8.8-4.5s-8.1 1.7-12.8 5.1a94 94 0 0 0-7.7 7 353.1 353.1 0 0 0-21 23l-9.4 11-9.8 10.9c-4.6 5-9.5 10.3-14.9 15.5a210 210 0 0 1-15.3 13.7c-5 4-8.8 6-11.5 6s-4.9-1-6.3-3a13 13 0 0 1-2-7.6c0-3.4.6-7.4 1.9-12 1.2-4.6 2.8-9.4 4.8-14.6a334 334 0 0 0 25-47.6c.3-.9.6-1.6.6-2.3 0-1.3-1-2.3-3-3.2a42.5 42.5 0 0 0-17.6-3.2 62 62 0 0 0-28.4 7.2 99.5 99.5 0 0 0-42.1 40.8c-6.7 7.4-13 14.3-19.3 20.7a62.2 62.2 0 0 1-19.2 13.9c-4 1.7-8.2 2.5-12.5 2.5a123.4 123.4 0 0 0-11.5-.3c-3 0-5.2.8-6.4 2.3l20.8-47.4 14.4-16.5a803 803 0 0 0 17-20.1l17.4-22.1A367 367 0 0 0 339.3 44a70 70 0 0 0 7.2-17.4 103 103 0 0 0 1-7.4c0-5-1.4-9.3-4.3-13.3S335.9 0 329.9 0a23 23 0 0 0-12.5 4.2 32 32 0 0 0-10.9 13.7c-3.2 6.9-6.6 14.7-10.2 23.7a10388.7 10388.7 0 0 1-41 99.5L245 152.7l-.7.6a583.3 583.3 0 0 1-19.9 21.3 62.2 62.2 0 0 1-19.2 13.9c-4 1.7-8.2 2.5-12.5 2.5a123.4 123.4 0 0 0-11.5-.3c-3 0-5.1.8-6.4 2.3l20.8-47.4 14.4-16.5c5.6-6.3 11.2-13 17-20.1l17.4-22.1A367 367 0 0 0 272.8 44a74 74 0 0 0 7.2-17.4 103 103 0 0 0 1-7.4c0-5-1.5-9.3-4.4-13.3-2.8-4-7.3-5.9-13.2-5.9a23 23 0 0 0-12.5 4.2A32 32 0 0 0 240 17.9c-3.2 6.9-6.6 14.7-10.2 23.7a10388.7 10388.7 0 0 1-41 99.5l-10.4 11.5-.8.7a473.4 473.4 0 0 1-25.3 26.9c-4.9 4.9-10 9.8-15.3 14.7a22 22 0 0 1-5.5 3.7c-1.7.7-3.2 1-4.5 1-1.7 0-2.7-.6-3-1.8-.3-1.3-.5-3-.5-4.8.5-5 2-11 4.5-18a348.3 348.3 0 0 1 21.1-47c4-7.5 6.6-12 7.7-13.8l.3-1.2v-1.3c0-2.4-1.3-3.5-3.8-3.5-1.5 0-2.6.5-3.2 1.6L129.3 134a368 368 0 0 0-10.9 12.8l-5.1 6.4a591.1 591.1 0 0 1-29.1 30.5c-4.7 4.4-9 8-13 11-4 2.8-7 4.2-9.4 4.2-3.5 0-5.7-1.7-7-5.2a31.1 31.1 0 0 1-1.7-9.8c0-4.5.6-9.6 1.8-15.4A321.2 321.2 0 0 1 71.4 117h35.8c2.8 0 4.2-1.4 4.2-4.1 0-2.6-1.4-3.9-4.2-3.9H74.6l1.6-3.8 9.6-22.9c3-7.1 6-14.6 9-22.2.3-.9.6-1.8.6-3s-.4-1.9-1.2-2.6a3.7 3.7 0 0 0-2.7-1.2c-1.9 0-3.2.9-3.8 2.6-.9 2-2 4.5-3.2 7.7-1 2.8-2.6 6.4-4.5 10.9-2 4.4-4.2 10-6.7 17-1.5 3-2.9 5.9-4.2 8.9-1.3 3-2.6 5.9-4.1 8.6H45c-2.7 0-4.1 1.3-4.1 3.9 0 2.7 1.3 4.1 4.1 4.1h15.7c-1.7 3-5.2 8-10.4 15a5685.7 5685.7 0 0 1-35 46.8 1365 1365 0 0 0-14.1 18.9 6.7 6.7 0 0 0-1.2 2.9c0 1.1.4 2 1.1 2.8.8.7 1.8 1 3 1s2.3-.3 3-1.2a4263.8 4263.8 0 0 1 47-61.4 154.4 154.4 0 0 0-8.7 42.5c0 5.6 1.3 10.7 3.9 15.5 2.5 4.8 6.7 7.2 12.5 7.2 4 0 8.8-1.9 14.4-5.7 5.5-3.9 11-8.4 16.4-13.8a350 350 0 0 0 28.5-31.3l2.7-3a70 70 0 0 0 3.7-4.6c1.4-1.8 3.3-4 5.6-6.5l-5.7 12.3a177.5 177.5 0 0 0-10.1 27.8 49 49 0 0 0-1.8 12c0 3.2.8 6.3 2.4 9.2s4.6 4.3 8.8 4.3c5.4 0 10.5-2.4 15.4-7 14.5-13.5 25-23.8 31.3-31l5.7-6.3a215.3 215.3 0 0 0-7 15.5l-15 34.5a637.2 637.2 0 0 0-12.1 30.1c-3.4 9.2-6.2 17.5-8.2 25-2 7.4-3 13.7-3 18.9s1.6 9.2 4.8 13c3.2 3.7 7.9 5.5 14 5.5 3.9 0 7.7-1 11.6-3.2 3.8-2.1 7.3-5.2 10.4-9.3 3-4 5.6-9 7.6-15s3-13 3-20.8c0-6.6-.3-13-1-19.4l-2.4-17.4-1.3-9.4c-.4-3.3-.7-6.8-.7-10.4 0-.9.2-1.4.4-1.6 0-.2 0-.4.3-.4.2-.2.6-.3 1.3-.3a59.3 59.3 0 0 0 8.6.3c6.8 0 12.8-1 18-3.2 6.5-2.7 12.9-7 19-13 5-4.8 11.1-11.2 18.2-19.2a214.6 214.6 0 0 0-6.9 15.3l-15 34.5a637.2 637.2 0 0 0-12.2 30.1c-3.4 9.2-6.1 17.5-8.1 25-2 7.4-3 13.7-3 18.9s1.5 9.2 4.7 13c3.2 3.7 8 5.5 14.1 5.5 3.8 0 7.7-1 11.5-3.2 3.9-2.1 7.3-5.2 10.4-9.3 3.1-4 5.7-9 7.7-15s3-13 3-20.8c0-6.6-.3-13-1-19.4a703.1 703.1 0 0 1-3.7-26.9c-.5-3.2-.7-6.7-.7-10.3 0-.9.1-1.4.3-1.6 0-.2.1-.4.3-.4.3-.2.7-.3 1.3-.3a59.3 59.3 0 0 0 8.6.3c6.9 0 12.9-1 18-3.2 6.6-2.7 13-7 19-13a182 182 0 0 0 8.8-8.8 50 50 0 0 0-1 9.4 27 27 0 0 0 5.3 17c3.6 4.7 8.7 7 15.6 7 4 0 7.9-.8 11.5-2.3a51.1 51.1 0 0 0 19.3-13.9c3-3 5.6-6.1 8.2-9.1a53 53 0 0 0-.6 6.7c0 4.7 1.3 9 4 12.8 2.6 3.8 6.7 5.8 12.3 5.8 6.2 0 13.6-4.1 22.4-12.4a671 671 0 0 0 34.9-36.3c2.8-3.3 6-6.8 9.4-10.9l10.6-12a212.3 212.3 0 0 1 17.1-17.1c3.2-2.3 5.9-3.5 8-3.5 1.5 0 2.4.5 2.9 1.6.4 1 .6 2.4.6 3.8 0 3.5-1 8.3-3 14.4a436.8 436.8 0 0 1-27.4 61.8c-1 2.1-1.6 3.7-1.6 4.8 0 2.8 1.4 4.2 4.2 4.2.4 0 1-.2 1.9-.5.8-.3 1.7-1.1 2.5-2.4l5.5-9.5a430 430 0 0 1 18.2-29.6 154.9 154.9 0 0 1 33.4-38.4 36.4 36.4 0 0 1 23-9.6c1.7 0 3 .3 4 .8 1 .6 1.4 2 1.4 4.4a25 25 0 0 1-1.3 7.2l-3.2 9.2a254.1 254.1 0 0 1-8.6 19.7c-3.7 7.5-6.8 14.5-9.5 21.1-2.6 6.7-4 12.3-4 17 0 2.8 1 5.4 2.7 7.8 1.9 2.5 4.8 3.7 8.8 3.7 3.9 0 8.3-1.5 13.2-4.6 4.9-3.1 9.9-7 15-11.7a283 283 0 0 0 15.5-15.5l15-16.2c.2-.3.5-.7.6-1.2 2.2-2.4 5-5.7 8.3-9.8a381.3 381.3 0 0 1 23.3-26.3c3.6-3.5 6.6-5.2 9-5.2 1.7 0 2.9.7 3.5 2 .6 1.4 1 3 1 4.7 0 4.3-1.1 9.5-3.2 15.8-2.2 6.3-4.4 12.6-6.8 18.7l-6.7 19.4a52.2 52.2 0 0 0-3.2 16.5c0 3.4 1 6.3 2.7 8.8 1.9 2.4 4.9 3.7 9.2 3.7a27 27 0 0 0 14.8-5.5 104 104 0 0 0 16.5-13.6c5.6-5.4 11-11.3 16-17.6a407 407 0 0 0 13.5-17.4l-10.8 26.7-12.3 30.2c-6.8 4.3-14.4 9.3-22.9 15a252.3 252.3 0 0 0-32.8 26 81 81 0 0 0-8.3 9.8 52.5 52.5 0 0 0-6.2 11.2 32 32 0 0 0-2.4 12.3c0 5.3 1.9 10.1 5.6 14.4 3.7 4.2 8.5 6.4 14.2 6.4 4.5 0 8.7-1.1 12.5-3.4a42 42 0 0 0 10.4-8.6c3.1-3.5 5.9-7.5 8.3-11.9a232.2 232.2 0 0 0 14.7-33 427 427 0 0 1 8.2-20.6l5.1-12.1a496 496 0 0 0 37.3-23.4c12-8.3 23.5-19 34.4-32 .6-.6 1-1.5 1-2.5s-.3-2-.8-3Zm-460-56.7 9.3-23a5063.1 5063.1 0 0 1 21.8-52.2c2.3-4.9 5-8.3 7.8-10.4 3-2 5.7-3 8.5-3 3.4 0 5.9 1.3 7.4 3.8a16.3 16.3 0 0 1 1.9 11.4 75.8 75.8 0 0 1-9.6 22.4c-4.7 7.8-10.2 16-16.5 24.6a875.7 875.7 0 0 1-40.8 51.7l10.2-25.3Zm-66.5 0 9.3-23A5063.1 5063.1 0 0 1 247 21.4c2.4-4.9 5-8.3 7.9-10.4 2.8-2 5.7-3 8.4-3 3.5 0 6 1.3 7.4 3.8a16.3 16.3 0 0 1 2 11.4 75.8 75.8 0 0 1-9.6 22.4c-4.8 7.8-10.3 16-16.5 24.6a875.7 875.7 0 0 1-40.8 51.7L216 96.6Zm-41.3 179.6a42.2 42.2 0 0 1-6.2 12.4 24.4 24.4 0 0 1-8 7c-3 1.6-5.6 2.3-8.2 2.3s-5-.7-7.2-2.2c-2.2-1.5-3.4-4.3-3.4-8.3 0-8.6 2.9-20.5 8.5-35.9a761.6 761.6 0 0 1 21.6-51.8v1.9c0 2.6.2 5.5.7 9L174 222c.8 5.5 1.6 11.2 2.2 17.1.6 5.9 1 11.9 1 18 0 7.5-.9 13.8-2.6 19Zm66.6 0a42.2 42.2 0 0 1-6.3 12.4 24.4 24.4 0 0 1-8 7c-2.9 1.6-5.6 2.3-8.1 2.3s-5-.7-7.2-2.2c-2.3-1.5-3.4-4.3-3.4-8.3 0-8.6 2.8-20.5 8.5-35.9a761.6 761.6 0 0 1 21.6-51.8v1.9c0 2.6.2 5.5.6 9l1.6 11.5c.9 5.5 1.6 11.2 2.3 17.1.6 5.9 1 11.9 1 18 0 7.5-1 13.8-2.6 19Zm118.5-104.5c-3.3 4.6-7 9-11.2 13.1a71.8 71.8 0 0 1-13 10.4c-4.4 2.8-8.9 4.2-13.4 4.2s-7.4-1.6-9.4-4.7c-2-3-3-6.7-3-11 0-7.3 2-15 6-23a94.3 94.3 0 0 1 38.9-39.8 53.2 53.2 0 0 1 31.5-6.7c1.7.3 3.2.6 4.5 1-2.6 4.3-6 10.4-10.4 18.4-4.4 8-8.4 16.5-12 25.4a200 200 0 0 1-8.5 12.7Zm296.3 56.8-4.1 10.9-5 12.4c-1.7 4.3-3.5 8.5-5.4 12.5a97 97 0 0 1-14 23c-4.7 5.6-10 8.4-15.8 8.4-3.6 0-6.5-1.3-8.8-3.9a13.6 13.6 0 0 1-3.3-9.2c0-2.8.6-5.7 2-8.8a79 79 0 0 1 20.6-26c5.6-5 11.6-9.7 18.2-14.2a707 707 0 0 1 18.7-12.5 76 76 0 0 0-3 7.4Z" />
					</clipPath>
				</defs>
				<path
					ref="iDot"
					d="M172.2 84.5a11 11 0 0 0 5.6-2c2-1.2 3-3.8 3-7.6 0-1.7-.5-3.3-1.4-4.8-1-1.5-2.7-2.3-5-2.3s-4.3 1-6 2.8a9.6 9.6 0 0 0-2.3 6.5c0 2 .4 3.7 1.3 5.1.8 1.5 2.4 2.3 4.8 2.3Z"
					class="fill-black-dark"
				/>
				<g clip-path="url(#tiffany)">
					<path
						ref="tiffany"
						d="M-1.65,199.91c-.44-2.01-3.55,1.11-1.87,2.29s3.93-.16,5.51-1.48C46.1,163.87,77.69,112.26,90.45,56.2c-21.91,34.83-44.55,72.03-45.03,113.17-.15,12.42,4.79,27.97,17.16,29.12,8.38,.78,15.46-5.77,21.31-11.83,25.16-26.11,50.32-52.22,75.49-78.34-17.41,18.01-28.74,41.79-31.75,66.66-.52,4.32-3.96,17-1.34,20.48,6.46,8.59,23.1-7.18,30.38-15.08,29.95-32.49,59.9-64.98,89.85-97.47,9.79-10.62,19.75-21.49,25.63-34.69,5.88-13.19,7.06-29.35-.57-41.61-2.11-3.39-5.07-6.54-8.94-7.53-9.04-2.31-16.12,7.53-20.24,15.9-19.65,39.92-33.13,79.93-52.43,120.02-17.97,37.33-35.85,74.91-47.97,114.54-4.43,14.5-12.85,33.12-.74,42.24,11.2,8.43,28.75,1.71,35.56-10.54s8.6-29.39,4.47-42.78c-4.13-13.39-13.96-24.14-16.81-37.86,36.33-6.78,65.29-28.41,90.81-55.14,22.24-23.3,43.52-53.04,65.45-76.63,7.97-8.57,16.07-17.39,20.59-28.18s4.81-24.12-2.27-33.43c-2.25-2.96-5.41-5.51-9.11-5.86-7.18-.66-12.22,6.68-15.56,13.08-37.31,71.49-71.12,144.81-101.25,219.62-2.48,6.16-5.29,19.78-4.86,26.4s0,33.32,6.54,34.5c4.72,.85,9.47-1.37,13.39-4.12,22.39-15.73,30.55-79.48,11.18-98.81,11.03,7.19,26.26,3.4,36.75-4.56s17.74-19.32,26.4-29.23c23.85-27.27,59.77-43.59,96-43.61-7.3-10.08-22.73-9.01-34.35-4.53-22.86,8.81-41.95,26.97-51.91,49.35-4.48,10.06-6.36,26.64,2.2,33.56,11.34,9.17,27.55-2.25,36.8-13.52,16.48-20.08,30.72-44.99,42.36-68.21-6.58,16.78-13.16,33.55-19.74,50.33-1.71,4.37-5.79,23.17-5.62,27.86,.58,15.97,23.77,4.28,38-3,14.23-7.28,24.08-18.17,33.98-30.73,13.45-17.06,26.16-34.48,46.02-43.27-11.86,27-18.77,57.71-30.63,84.71,20.51-31.21,46.91-58.53,77.38-80.12,6.94-4.92,18.12-8.82,22.58-1.58,2.26,3.66,1.25,8.4-.1,12.49-6.23,18.91-23.25,40.03-25.78,59.78-.48,3.75-.53,7.85,1.59,10.98,3.58,5.3,16.89,1.22,22.2-2.35s8.42-9.52,11.58-15.08c16.16-28.46,39.12-53.03,66.43-71.06,14.54,20.66-14.79,52.76-10.53,77.65,.56,3.27,1.7,6.64,4.23,8.8,6.13,5.25,22.45-3.47,28.82-8.44,24.76-19.33,40.91-45.28,59.24-70.78-19.1,28.89-27.55,66.43-40.17,98.69s-25.88,64.69-57.47,78.9c-3.77,1.7-8.2,3.1-11.94,1.33-4.86-2.29-6.05-20.09-3.94-25.02,2.11-4.94,6.54-8.42,10.8-11.69,50.71-38.95,95-72.26,145.71-111.21"
						class="tc-home-splash-stroke stroke-black-dark"
						:style="{ 'stroke-dasharray': tiffStrokeLength }"
						/>
						<path 
						ref="tLine"
						d="M16.16,106.86c-.25-.51-1.13,.06-.97,.6s.77,.8,1.31,.97c32.06,10,66.62,1.48,100.19,2.27"
						class="tc-home-splash-stroke stroke-black-dark"
						:style="{ 'stroke-dasharray': lineStrokeLength }"
					/>
				</g>
			</svg>
			<h1 
				ref="choong"
				aria-label="Tiffany Choong"
				class="tc-home-splash-title"
			>
				Choong
			</h1>
			<p class="tc-home-splash-subtitle">
				Front end developer + designer
			</p>
		</div>
		<svg 
			ref="pattern"
			class="tc-home-splash-pattern"
		>
			<rect height="100%" width="100%" fill="url(#dotsSpaced)"></rect>
		</svg>
	</section>
</template>

<script setup lang="ts">
import { onMounted, ref } from 'vue';
import { gsap } from 'gsap';
import { ScrollTrigger } from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger);

const root = ref();
const content = ref();
const tiffany = ref();
const tLine = ref();
const iDot = ref();
const choong = ref();
const pattern = ref();

const tiffStrokeLength = ref(0);
const lineStrokeLength = ref(0);

onMounted(() => {
	tiffStrokeLength.value = Math.round(tiffany.value?.getTotalLength());
	lineStrokeLength.value = Math.round(tLine.value?.getTotalLength());

	// TODO: wrap in intersection observer
	const tl = gsap.timeline({ delay: 1 });
	tl
		.from(tiffany.value, {
			duration: 2,
			ease: 'power2.inOut',
			'stroke-dashoffset': tiffStrokeLength.value
		})
		.from(tLine.value, {
			duration: 0.5,
			ease: 'power2.in',
			'stroke-dashoffset': lineStrokeLength.value
		})
		.from(iDot.value, {
			duration: 0.5,
			ease: 'elastic.out(1, 0.4)',
			scale: 0
		})
		.from(choong.value, {
			duration: 1,
			ease: 'elastic.out(1, 0.4)',
			opacity: 0,
			scale: 0.5
		})

	gsap.to(content.value, {
		yPercent: 100,
		ease: 'none',
		scrollTrigger: {
			trigger: root.value,
			start: 'top top',
			endTrigger: '#work',
			end: 'top top',
			scrub: true
		}, 
	});

	gsap.to(pattern.value, {
		yPercent: 50,
		ease: 'none',
		scrollTrigger: {
			trigger: root.value,
			start: 'top top',
			end: 'bottom top',
			scrub: true
		}, 
	});
});
</script>

<style lang="scss">
.tc-home-splash {
	position: relative;
	z-index: 1;
	padding-top: 3rem;
	// min-height: 50rem;
	min-height: 100vh;
	background-color: var(--color-accent);
	text-align: center;
	overflow: hidden;

	&-stroke {
		fill: none;
		stroke-linecap: round;
		stroke-linejoin: round;
		stroke-width: 10px;
	}

	&-svg {
		width: 70%;
		max-width: 46rem;
		overflow: visible;
	}

	&-title {
		font-size: 14rem;
		font-size: clamp(3rem, 20vw, 14rem);
		color: var(--color-secondary);
	}

	&-subtitle {
		font-family: var(--font-fam-2);
		font-size: var(--font-size-2)
	}

	&-content {
		position: relative;
		z-index: 1;
	}

	&-pattern {
		position: absolute;
		top: 0;
		left: 0;
		height: 200%;
		width: 100%;
	}
}
</style>